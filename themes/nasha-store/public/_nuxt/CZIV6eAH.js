import{bn as ke,bo as $e,ai as Ce,aa as Se,ab as Te,ad as ie,d as q,A as X,bp as Pe,bq as Re,R as ue,s as T,T as x,br as Ae,aT as Be,x as me,a as ge,e as s,o as a,c as i,t as w,h as k,D as fe,F as N,r as V,b as S,aB as Ie,f as he,ax as Oe,i as r,j as H,L as Le,w as Q,a1 as I,u as pe,z as ve,g as B,p as je,n as Ne,y as Me,v as qe,aC as ze,k as Ee,l as Ue,$ as De,a0 as Fe,B as Ve}from"./D2h1M-6X.js";import{_ as He}from"./DM4cFtrS.js";import{_ as We}from"./5Eo_AKUy.js";import{P as re,S as K}from"./B35ZW4wC.js";const Ke=ke({name:"Ellipsis",common:Ce,peers:{Tooltip:$e}}),Qe=Se("ellipsis",{overflow:"hidden"},[Te("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),ie("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),ie("cursor-pointer",`
 cursor: pointer;
 `)]);function ce(e){return`${e}-ellipsis--line-clamp`}function de(e,p){return`${e}-ellipsis--cursor-${p}`}const Ge=Object.assign(Object.assign({},ue.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),Je=q({name:"Ellipsis",inheritAttrs:!1,props:Ge,setup(e,{slots:p,attrs:d}){const t=Re(),h=ue("Ellipsis","-ellipsis",Qe,Ke,e,t),$=T(null),C=T(null),o=T(null),m=T(!1),c=x(()=>{const{lineClamp:l}=e,{value:v}=m;return l!==void 0?{textOverflow:"","-webkit-line-clamp":v?"":l}:{textOverflow:v?"":"ellipsis","-webkit-line-clamp":""}});function n(){let l=!1;const{value:v}=m;if(v)return!0;const{value:b}=$;if(b){const{lineClamp:O}=e;if(f(b),O!==void 0)l=b.scrollHeight<=b.offsetHeight;else{const{value:W}=C;W&&(l=W.getBoundingClientRect().width<=b.getBoundingClientRect().width)}_(b,l)}return l}const g=x(()=>e.expandTrigger==="click"?()=>{var l;const{value:v}=m;v&&((l=o.value)===null||l===void 0||l.setShow(!1)),m.value=!v}:void 0);Ae(()=>{var l;e.tooltip&&((l=o.value)===null||l===void 0||l.setShow(!1))});const R=()=>X("span",Object.assign({},Be(d,{class:[`${t.value}-ellipsis`,e.lineClamp!==void 0?ce(t.value):void 0,e.expandTrigger==="click"?de(t.value,"pointer"):void 0],style:c.value}),{ref:"triggerRef",onClick:g.value,onMouseenter:e.expandTrigger==="click"?n:void 0}),e.lineClamp?p:X("span",{ref:"triggerInnerRef"},p));function f(l){if(!l)return;const v=c.value,b=ce(t.value);e.lineClamp!==void 0?M(l,b,"add"):M(l,b,"remove");for(const O in v)l.style[O]!==v[O]&&(l.style[O]=v[O])}function _(l,v){const b=de(t.value,"pointer");e.expandTrigger==="click"&&!v?M(l,b,"add"):M(l,b,"remove")}function M(l,v,b){b==="add"?l.classList.contains(v)||l.classList.add(v):l.classList.contains(v)&&l.classList.remove(v)}return{mergedTheme:h,triggerRef:$,triggerInnerRef:C,tooltipRef:o,handleClick:g,renderTrigger:R,getTooltipDisabled:n}},render(){var e;const{tooltip:p,renderTrigger:d,$slots:t}=this;if(p){const{mergedTheme:h}=this;return X(Pe,Object.assign({ref:"tooltipRef",placement:"top"},p,{getDisabled:this.getTooltipDisabled,theme:h.peers.Tooltip,themeOverrides:h.peerOverrides.Tooltip}),{trigger:d,default:(e=t.tooltip)!==null&&e!==void 0?e:t.default})}else return d()}}),Xe={key:0,class:"red-badge"},Ye=q({__name:"SaleBadge",props:{node:{type:Object,required:!0}},setup(e){const{t:p}=me(),{storeSettings:d}=ge(),t=x(()=>{var m,c,n,g;if(!((m=e.node)!=null&&m.rawSalePrice)||!((c=e.node)!=null&&c.rawRegularPrice))return"";const C=parseFloat((n=e.node)==null?void 0:n.rawSalePrice),o=parseFloat((g=e.node)==null?void 0:g.rawRegularPrice);return Math.round((C-o)/o*100)+" %"}),h=x(()=>e.node.rawSalePrice&&d.saleBadge!=="hidden"),$=x(()=>(d==null?void 0:d.saleBadge)==="percent"?t.value:p("messages.shop.onSale")?p("messages.shop.onSale"):"Sale");return(C,o)=>s(h)?(a(),i("span",Xe,w(s($)),1)):k("",!0)}}),Ze=fe(Ye,[["__scopeId","data-v-56b66139"]]),et={class:"inline-flex items-center"},tt={key:0,class:"text-xs ml-1 text-gray-500"},st=q({__name:"StarRating",props:{rating:{type:Number,default:0},count:{type:Number,default:null},hideCount:{type:Boolean,default:!1},size:{type:Number,default:14}},setup(e){return(p,d)=>{const t=he;return a(),i("div",et,[(a(),i(N,null,V(5,h=>S(t,{key:h,name:"ion:star",size:e.size+"",class:"mr-[2px]",style:Ie({color:e.rating<h?"#ccc":"#FBBE24"})},null,8,["size","style"])),64)),e.count!==null&&!e.hideCount?(a(),i("span",tt,"("+w(e.count)+")",1)):k("",!0)])}}}),nt={class:"relative inline-block group"},at={class:"absolute bottom-full left-1/2 transform -translate-x-1/2 -translate-y-4 invisible group-hover:visible opacity-0 group-hover:opacity-100 bg-black bg-opacity-80 text-white text-sm rounded px-2 py-2 transition-opacity duration-300 whitespace-nowrap"},lt=q({__name:"Tooltip",props:{text:{type:String,required:!0}},setup(e){return(p,d)=>(a(),i("div",nt,[Oe(p.$slots,"default"),r("div",at,[H(w(e.text)+" ",1),d[0]||(d[0]=r("div",{class:"absolute left-1/2 transform -translate-x-1/2 top-full w-0 h-0 border-8 border-transparent border-t-black border-t-opacity-80"},null,-1))])]))}}),ot={key:0,class:"flex flex-col gap-1 justify-between"},it={key:0,class:"grid gap-2"},rt={class:"text-sm"},ct={key:0,class:"text-gray-400"},dt={class:"flex gap-2"},ut=["for"],mt=["id","checked","name","value"],gt=["title"],ft={key:1,class:"grid gap-2"},ht={class:"text-sm"},pt={key:0,class:"text-gray-400"},vt=["id","name"],bt={disabled:"",hidden:""},yt=["value","innerHTML","selected"],xt={key:2,class:"grid gap-2"},_t={class:"text-sm"},wt={key:0,class:"text-gray-400"},kt={class:"flex gap-2"},$t=["for"],Ct=["id","checked","name","value"],St=["title"],Tt=q({__name:"AttributeSelections",props:{attributes:{},defaultAttributes:{}},emits:["attrs-changed"],setup(e,{emit:p}){const d=p,t=T([]),h=x(()=>(o,m)=>o.terms.nodes.find(c=>c.slug===m.value).name),$=()=>{const o=e.attributes.map(m=>{const c=document.querySelector(`.name-${m.name}:checked`),n=document.querySelector(`#${m.name}`),g=m.name.charAt(0).toLowerCase()+m.name.slice(1),R=(c==null?void 0:c.value)??(n==null?void 0:n.value)??"";return{name:g,value:R}});t.value=o,d("attrs-changed",o)},C=()=>{var o,m;(o=e.defaultAttributes)!=null&&o.nodes&&((m=e.defaultAttributes)==null||m.nodes.forEach(c=>{const n=document.querySelector(`.name-${c.name}[value="${c.value}"]`);n&&(n.checked=!0);const g=document.querySelector(`#${c.name}`);g&&(g.value=c.value)}))};return Le(()=>{C(),$()}),(o,m)=>{const c=lt;return o.attributes?(a(),i("div",ot,[(a(!0),i(N,null,V(o.attributes,(n,g)=>{var R;return a(),i("div",{key:g,class:"flex flex-wrap py-2 relative justify-between"},[n.name=="pa_color"||n.name=="color"?(a(),i("div",it,[r("div",rt,[H(w(o.$t("messages.general.color"))+" ",1),s(t).length?(a(),i("span",ct,w(s(h)(n,s(t)[g])),1)):k("",!0)]),r("div",dt,[(a(!0),i(N,null,V(n.terms.nodes,(f,_)=>(a(),i("span",{key:_},[S(c,{text:f.name},{default:Q(()=>[r("label",{for:`${f.slug}_${_}`},[r("input",{id:`${f.slug}_${_}`,ref_for:!0,ref:n.name,class:I(["hidden",`name-${n.name}`]),checked:_==0,type:"radio",name:n.name,value:f.slug,onChange:$},null,42,mt),r("span",{class:I(["color-button",`color-${f.slug}`]),title:`${n.name}: ${f}`},null,10,gt)],8,ut)]),_:2},1032,["text"])]))),128))])])):n.terms.nodes&&((R=n.terms.nodes)==null?void 0:R.length)>8?(a(),i("div",ft,[r("div",ht,[H(w(n.label)+" ",1),s(t).length?(a(),i("span",pt,w(s(h)(n,s(t)[g])),1)):k("",!0)]),r("select",{id:n.name,ref_for:!0,ref:n.name,name:n.name,required:"",class:"border-white shadow",onChange:$},[r("option",bt,w(o.$t("messages.general.choose"))+" "+w(decodeURIComponent(n.label)),1),(a(!0),i(N,null,V(n.terms.nodes,(f,_)=>(a(),i("option",{key:_,value:f.slug,innerHTML:f.name,selected:_==0},null,8,yt))),128))],40,vt)])):(a(),i("div",xt,[r("div",_t,[H(w(n.label)+" ",1),s(t).length?(a(),i("span",wt,": "+w(s(h)(n,s(t)[g])),1)):k("",!0)]),r("div",kt,[(a(!0),i(N,null,V(n.terms.nodes,(f,_)=>(a(),i("span",{key:_},[r("label",{for:`${f.slug}_${_}`},[r("input",{id:`${f.slug}_${_}`,ref_for:!0,ref:n.name,class:I(["hidden",`name-${n.name}`]),checked:_==0,type:"radio",name:n.name,value:f.slug,onChange:$},null,42,Ct),r("span",{class:I(["radio-button",`picker-${f.slug}`]),title:`${n.name}: ${f.slug}`},w(f.name),11,St)],8,$t)]))),128))])]))])}),128))])):k("",!0)}}}),Pt=["disabled"],Rt={key:0},At={key:2,class:"p-1"},Bt={__name:"AddToCartButton",props:{disabled:{type:Boolean,default:!1},onlyIcon:{type:Boolean,default:!1}},setup(e){const{cart:p}=pe(),d=T(!1),{t}=me(),h=x(()=>d.value?t("messages.shop.adding"):t("messages.shop.addToCart"));return ve(p,$=>{d.value=!1}),($,C)=>{const o=je,m=Ne;return a(),i("button",{type:"submit",class:I(["rounded-lg flex font-bold bg-gray-800 text-white text-center p-1 gap-4 items-center justify-center px-4 focus:outline-none",{disabled:e.disabled}]),disabled:e.disabled,onClick:C[0]||(C[0]=c=>d.value=!0)},[e.onlyIcon?k("",!0):(a(),i("span",Rt,w(s(h)),1)),e.onlyIcon&&!s(d)?(a(),B(o,{key:1,icon:"material-symbols:add-shopping-cart-rounded",class:"text-xl text-white dark:text-black"})):k("",!0),s(d)?(a(),i("div",At,[S(m,{stroke:"4",size:"12",color:"#fff"})])):k("",!0)],10,Pt)}}},It=fe(Bt,[["__scopeId","data-v-9870421e"]]),Ot={class:"flex flex-col gap-2"},Lt={class:"text-sm"},jt={class:"flex self-justify-end gap-4 justify-between items-end"},Nt={class:"p-4"},Mt={class:"text-lg font-semibold text-white"},qt={class:"flex flex-col gap-4 items-center"},zt={class:"flex-1"},Et={class:"text-lg font-semibold text-white"},Ht=q({__name:"ProductCard",props:{node:{type:Object,required:!0},index:{type:Number,default:1},typecard:{type:String,default:"default"}},setup(e){var ee,te,se,ne;const p=Me(),{storeSettings:d}=ge(),t=e,h=x(()=>t.typecard==="bestseller"?80:220),$=x(()=>Math.round(h.value*(t.typecard==="bestseller"?1:1.125))),C=T((ee=p.query)==null?void 0:ee.filter),o=T(((ne=(se=(te=C.value)==null?void 0:te.split("pa_color[")[1])==null?void 0:se.split("]")[0])==null?void 0:ne.split(","))||[]);ve(()=>p.query,()=>{var u,y,P;C.value=p.query.filter,o.value=((P=(y=(u=C.value)==null?void 0:u.split("pa_color[")[1])==null?void 0:y.split("]")[0])==null?void 0:P.split(","))||[]});const m=x(()=>{var u,y,P,A;return((y=(u=t.node)==null?void 0:u.image)==null?void 0:y.producCardSourceUrl)||((A=(P=t.node)==null?void 0:P.image)==null?void 0:A.sourceUrl)||"/images/placeholder.jpg"}),c=x(()=>{var u,y,P,A;if(o.value.length){const L=(y=(u=t.node)==null?void 0:u.variations)==null?void 0:y.nodes.filter(z=>{var U;const J=(U=z.attributes)==null?void 0:U.nodes.some(D=>o.value.some(j=>D.value.includes(j))),E=o.value.some(D=>{var j;return(j=z.slug)==null?void 0:j.includes(D)});return J||E});if(L!=null&&L.length)return((P=L[0].image)==null?void 0:P.producCardSourceUrl)||((A=L[0].image)==null?void 0:A.sourceUrl)||m.value}return m.value});qe();const{addToCart:n,isUpdatingCart:g}=pe(),R=T(""),f=T(1),_=T(null),M=async u=>{g.value=!0,R.value="";try{await n(u)}catch(y){console.error("Error adding item to cart:",y),R.value=y||"There was an error adding the item to your cart. Please try again."}finally{g.value=!1}},l=x(()=>{var u;return((u=t.node)==null?void 0:u.type)===re.SIMPLE}),v=x(()=>{var u;return((u=t.node)==null?void 0:u.type)===re.VARIABLE}),b=x(()=>_.value||t.node),O=x(()=>{var u;return{productId:(u=b.value)==null?void 0:u.databaseId,quantity:f.value}}),{addToWishlist:W,removeFromWishlist:be,isInList:ye}=ze(),Y=x(()=>t.node.databaseId?ye(t.node.databaseId):!1),xe=()=>{Y.value&&t.node.databaseId?be(t.node.databaseId):W(t.node)},Z=x(()=>{var u,y;return v.value?((u=_.value)==null?void 0:u.stockStatus)||K.OUT_OF_STOCK:((y=b.value)==null?void 0:y.stockStatus)||K.OUT_OF_STOCK}),G=x(()=>l.value?!b.value||Z.value===K.OUT_OF_STOCK||g.value:!b.value||Z.value===K.OUT_OF_STOCK||!_.value||g.value),_e=x(()=>({default:"relative product-card p-2 max-h-[360px] flex w-full max-w-xs flex-col justify-between overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md",featured:"relative product-card flex-shrink-0 w-64 bg-gray-800 rounded-lg overflow-hidden shadow-lg",bestseller:"relative product-card bg-red-300 text-black-900 rounded-lg overflow-hidden shadow-lg p-4 w-full min-w-96 gap-4 flex flex-col justify-between"})[t.typecard]),we=d.isNative;return(u,y)=>{var ae,le;const P=Ze,A=He,L=Ee,z=st,J=Je,E=We,U=he,D=Tt,j=It;return a(),i("div",{class:I([s(_e),s(we)?"max-h-[360px]":""])},[t.typecard==="default"?(a(),i(N,{key:0},[S(L,{to:`/product/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:Q(()=>{var F,oe;return[S(P,{node:e.node,class:"absolute top-2 right-2"},null,8,["node"]),s(c)?(a(),B(A,{key:0,width:s(h),height:s($),src:s(c),alt:((F=e.node.image)==null?void 0:F.altText)||e.node.name||"Product image",title:((oe=e.node.image)==null?void 0:oe.title)||e.node.name,loading:e.index<=3?"eager":"lazy",sizes:`${s(h)/2}px md:${s(h)}px`,placeholder:"","placeholder-class":"blur-xl"},null,8,["width","height","src","alt","title","loading","sizes"])):k("",!0)]}),_:1},8,["to","title"]),r("div",Ot,[s(d).showReviews?(a(),B(z,{key:0,rating:e.node.averageRating,count:e.node.reviewCount},null,8,["rating","count"])):k("",!0),S(L,{to:`/product/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:Q(()=>[S(J,{class:"mb-2 font-light leading-tight","line-clamp":2},{default:Q(()=>[H(w(e.node.name),1)]),_:1})]),_:1},8,["to","title"])]),r("div",Lt,[S(E,{"sale-price":e.node.salePrice,"regular-price":e.node.regularPrice},null,8,["sale-price","regular-price"])]),r("div",jt,[r("div",null,[r("button",{type:"button",class:"cursor-pointer flex mt-4 text-sm text-gray-400 gap-2 items-center",onClick:xe},[s(Y)?(a(),B(U,{key:0,name:"ion:heart",size:"30",class:"text-red-400"})):(a(),B(U,{key:1,name:"ion:heart-outline",size:"30"}))])]),r("form",{onSubmit:y[1]||(y[1]=Ue(F=>M(s(O)),["prevent"]))},[e.node.type=="VARIABLE"&&e.node.attributes&&e.node.variations?(a(),B(D,{key:0,class:"mt-8 mb-8",attributes:e.node.attributes.nodes,defaultAttributes:e.node.defaultAttributes,variations:e.node.variations.nodes,onAttrsChanged:u.updateSelectedVariations},null,8,["attributes","defaultAttributes","variations","onAttrsChanged"])):k("",!0),De(r("input",{"onUpdate:modelValue":y[0]||(y[0]=F=>Ve(f)?f.value=F:null),type:"number",hidden:!0,min:"1","aria-label":"Quantity"},null,512),[[Fe,s(f)]]),S(j,{class:I(["",{loading:s(g)}]),disabled:s(G),"only-icon":!0},null,8,["disabled","class"])],32)])],64)):t.typecard==="featured"?(a(),i(N,{key:1},[s(c)?(a(),B(A,{key:0,width:s(h),height:s($),src:s(c),alt:((ae=e.node.image)==null?void 0:ae.altText)||e.node.name,class:"w-full h-48 object-cover"},null,8,["width","height","src","alt"])):k("",!0),r("div",Nt,[r("h3",Mt,w(e.node.name),1),S(E,{"sale-price":e.node.salePrice,"regular-price":e.node.regularPrice,class:"text-white"},null,8,["sale-price","regular-price"]),S(j,{disabled:s(G),class:I(["mt-2 w-full",{loading:s(g)}])},null,8,["disabled","class"])])],64)):t.typecard==="bestseller"?(a(),i(N,{key:2},[r("div",qt,[s(c)?(a(),B(A,{key:0,width:s(h),height:s($),src:s(c),alt:((le=e.node.image)==null?void 0:le.altText)||e.node.name,class:"w-20 h-20 object-cover rounded-full mr-4"},null,8,["width","height","src","alt"])):k("",!0),r("div",zt,[r("h3",Et,w(e.node.name),1),S(E,{"sale-price":e.node.salePrice,"regular-price":e.node.regularPrice,class:"text-white"},null,8,["sale-price","regular-price"]),s(d).showReviews?(a(),B(z,{key:0,rating:e.node.averageRating,count:e.node.reviewCount},null,8,["rating","count"])):k("",!0)])]),S(j,{disabled:s(G),class:I(["mt-4 w-full",{loading:s(g)}])},null,8,["disabled","class"])],64)):k("",!0)],2)}}});export{Je as _,Ze as a,st as b,Tt as c,It as d,Ht as e};
