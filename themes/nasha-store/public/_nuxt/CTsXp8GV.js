import{_ as F}from"./DM4cFtrS.js";import{d as G,u as L,v as N,T as y,s as M,z as O,o as w,c as S,i as f,b as _,f as V,e as n,$ as H,a0 as J,B as K,D as U,ay as Z,az as ee,aA as z,a1 as B,ax as te,aB as ne,h as E,aC as oe,a as se,g as ae,w as A,k as re,j as ie,t as $}from"./D2h1M-6X.js";import{_ as le}from"./5Eo_AKUy.js";const ce={class:"flex rounded bg-white text-sm leading-none shadow-sm shadow-gray-200 isolate"},ue=["disabled"],de=["max"],pe=["disabled"],me=G({__name:"QuantityInput",props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:s,isUpdatingCart:a}=L(),{debounce:l}=N(),u=y(()=>{var c,r;return e.item.variation?(c=e.item.variation)==null?void 0:c.node:(r=e.item.product)==null?void 0:r.node}),t=M(e.item.quantity),d=y(()=>u.value.stockQuantity?u.value.stockQuantity<=t.value:!1),h=()=>t.value++,p=()=>t.value--;return O(t,l(()=>{s(e.item.key,t.value>=0?t.value:0)},250)),(c,r)=>{const o=V;return w(),S("div",ce,[f("button",{title:"Decrease Quantity","aria-label":"Decrease Quantity",onClick:p,type:"button",class:"focus:outline-none border-r w-6 h-6 border rounded-l border-gray-300 hover:bg-gray-50 disabled:cursor-not-allowed",disabled:n(a)||n(t)<=0},[_(o,{name:"ion:remove",size:"14"})],8,ue),H(f("input",{"onUpdate:modelValue":r[0]||(r[0]=m=>K(t)?t.value=m:null),type:"number",min:"0",max:n(u).stockQuantity,"aria-label":"Quantity",class:"flex items-center justify-center w-8 px-2 text-right text-xs focus:outline-none border-y border-gray-300"},null,8,de),[[J,n(t),void 0,{number:!0}]]),f("button",{title:"Increase Quantity","aria-label":"Increase Quantity",onClick:h,type:"button",class:"focus:outline-none border-l w-6 h-6 border rounded-r hover:bg-gray-50 border-gray-300 disabled:cursor-not-allowed disabled:bg-gray-100",disabled:n(a)||n(d)},[_(o,{name:"ion:add",size:"14"})],8,pe)])}}}),fe=U(me,[["__scopeId","data-v-c8b93d16"]]),ve={},he={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 512 512"};function ge(e,s){return w(),S("svg",he,s[0]||(s[0]=[f("path",{d:"M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),f("path",{stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M80 112h352"},null,-1),f("path",{d:"M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}const ye=U(ve,[["render",ge]]);function _e(e){return Z()?(ee(e),!0):!1}function R(e){return typeof e=="function"?e():n(e)}const xe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const be=Object.prototype.toString,we=e=>be.call(e)==="[object Object]",W=()=>{},X=xe?window:void 0;function ke(e){var s;const a=R(e);return(s=a==null?void 0:a.$el)!=null?s:a}function D(...e){let s,a,l,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([a,l,u]=e,s=X):[s,a,l,u]=e,!s)return W;Array.isArray(a)||(a=[a]),Array.isArray(l)||(l=[l]);const t=[],d=()=>{t.forEach(r=>r()),t.length=0},h=(r,o,m,v)=>(r.addEventListener(o,m,v),()=>r.removeEventListener(o,m,v)),p=O(()=>[ke(s),R(u)],([r,o])=>{if(d(),!r)return;const m=we(o)?{...o}:o;t.push(...a.flatMap(v=>l.map(k=>h(r,v,k,m))))},{immediate:!0,flush:"post"}),c=()=>{p(),d()};return _e(c),c}function Se(e,s={}){const{threshold:a=50,onSwipe:l,onSwipeEnd:u,onSwipeStart:t,passive:d=!0,window:h=X}=s,p=z({x:0,y:0}),c=z({x:0,y:0}),r=y(()=>p.x-c.x),o=y(()=>p.y-c.y),{max:m,abs:v}=Math,k=y(()=>m(v(r.value),v(o.value))>=a),x=M(!1),I=y(()=>k.value?v(r.value)>v(o.value)?r.value>0?"left":"right":o.value>0?"up":"down":"none"),Q=i=>[i.touches[0].clientX,i.touches[0].clientY],P=(i,b)=>{p.x=i,p.y=b},C=(i,b)=>{c.x=i,c.y=b};let g;const j=Ce(h==null?void 0:h.document);d?g=j?{passive:!0}:{capture:!1}:g=j?{passive:!1,capture:!0}:{capture:!0};const q=i=>{x.value&&(u==null||u(i,I.value)),x.value=!1},Y=[D(e,"touchstart",i=>{if(i.touches.length!==1)return;g.capture&&!g.passive&&i.preventDefault();const[b,T]=Q(i);P(b,T),C(b,T),t==null||t(i)},g),D(e,"touchmove",i=>{if(i.touches.length!==1)return;const[b,T]=Q(i);C(b,T),!x.value&&k.value&&(x.value=!0),x.value&&(l==null||l(i))},g),D(e,["touchend","touchcancel"],q,g)];return{isPassiveEventSupported:j,isSwiping:x,direction:I,coordsStart:p,coordsEnd:c,lengthX:r,lengthY:o,stop:()=>Y.forEach(i=>i())}}function Ce(e){if(!e)return!1;let s=!1;const a={get passive(){return s=!0,!1}};return e.addEventListener("x",W,a),e.removeEventListener("x",W),s}const $e={key:0,class:"rounded-lg flex h-16 w-full overflow-hidden relative items-center"},Ee={__name:"SwipeCard",emits:["remove"],setup(e,{emit:s}){const a=s,l=M(!0),u=M(null),{isSwiping:t,lengthX:d}=Se(u,{passive:!0,onSwipeEnd(){d.value>80&&(l.value=!1,a("remove"))}});return(h,p)=>{const c=ye;return n(l)?(w(),S("div",$e,[_(c,{class:B(["transform transition-all right-0 w-6 scale-0 absolute",{"scale-100":n(d)>40,"delete-ready":n(d)>80}])},null,8,["class"]),f("div",{class:B(["rounded-lg inset-0 absolute",{"transition-all":!n(t)}]),ref_key:"el",ref:u,style:ne({transform:n(t)?`translateX(-${n(d)}px)`:"none"})},[te(h.$slots,"default")],6)])):E("",!0)}}},Ie={key:0,class:"flex items-center gap-3 group"},Qe={class:"flex-1"},Te={class:"flex gap-x-2 gap-y-1 flex-wrap items-center"},Me={key:0,class:"text-[10px] border-green-200 leading-none bg-green-100 inline-block p-0.5 rounded text-green-600 border"},Pe={key:1,class:"text-[10px] border-yellow-200 leading-none bg-yellow-100 inline-block p-0.5 rounded text-orange-500 border"},je={class:"inline-flex gap-2 flex-col items-end"},Ae={class:"text-xs text-gray-400 group-hover:text-gray-700 flex leading-none items-center"},Le={__name:"CartCard",props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:s}=L(),{addToWishlist:a}=oe(),{fallbackImage:l}=N(),{storeSettings:u}=se(),t=y(()=>{var o,m;return e.item.variation?(o=e.item.variation)==null?void 0:o.node:(m=e.item.product)==null?void 0:m.node}),d=y(()=>`/product/${decodeURIComponent(e.item.product.node.slug)}`),h=y(()=>t.value.stockQuantity?t.value.lowStockAmount>=t.value.stockQuantity:!1),p=()=>{s(e.item.key,0)},c=()=>{a(e.item.product.node),p()},r=y(()=>{const o=parseFloat(t.value.regularPrice.replace(/\D/g,"")),m=parseFloat(t.value.salePrice.replace(/\D/g,""));return Math.round((o-m)/o*100)+"%"});return(o,m)=>{const v=F,k=re,x=le,I=fe,Q=V,P=Ee;return w(),ae(P,{onRemove:p},{default:A(()=>[n(t)?(w(),S("div",Ie,[_(k,{to:n(d)},{default:A(()=>{var C,g;return[_(v,{width:"96",height:"64",class:"w-full h-16 rounded-md skeleton",src:n(t).image.cartSourceUrl||n(t).image.sourceUrl||e.item.product.image.sourceUrl||n(l),alt:((C=n(t).image)==null?void 0:C.altText)||n(t).name,title:((g=n(t).image)==null?void 0:g.title)||n(t).name,loading:"lazy"},null,8,["src","alt","title"])]}),_:1},8,["to"]),f("div",Qe,[f("div",Te,[_(k,{class:"leading-tight",to:n(d)},{default:A(()=>[ie($(n(t).name),1)]),_:1},8,["to"]),n(t).salePrice?(w(),S("span",Me,$(o.$t("messages.shop.save"))+" "+$(n(r)),1)):E("",!0),n(h)?(w(),S("span",Pe,$(o.$t("messages.shop.lowStock")),1)):E("",!0)]),_(x,{class:"mt-1 text-xs","sale-price":n(t).salePrice,"regular-price":n(t).regularPrice},null,8,["sale-price","regular-price"])]),f("div",je,[_(I,{item:e.item},null,8,["item"]),f("div",Ae,[n(u).showMoveToWishlist?(w(),S("button",{key:0,class:"mr-2 pr-2 border-r",onClick:c,type:"button"},$(o.$t("messages.storeSettings.showMoveToWishlist")),1)):E("",!0),f("button",{title:"Remove Item","aria-label":"Remove Item",onClick:p,type:"button",class:"flex items-center gap-1 hover:text-red-500 cursor-pointer"},[_(Q,{name:"ion:trash",class:"hidden md:inline-block",size:"12"})])])])])):E("",!0)]),_:1})}}};export{Le as _,ye as a};
